@{
    ViewBag.Title = "Change Password";
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>SuperBaby</title>
    <link href="~/Content/style.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/Content/pushy.css" type="text/css">
    <link href="~/Content/Custom.css" rel="stylesheet" />
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <link href="~/Content/Share.css" rel="stylesheet" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css" />
    <script src="~/Scripts/jquery.min.js" type="text/javascript"></script>
    <script src="~/Scripts/modernizr.custom.71422.js" type="text/javascript"></script>

    @Scripts.Render("~/Scripts/jquery-1.7.1.min.js")
    @Scripts.Render("~/Scripts/jquery-ui-1.8.20.min.js")
    @Scripts.Render("~/bundles/jqueryval")
    @*@Styles.Render("~/Content/css")*@
    @Scripts.Render("~/bundles/modernizr")

    <style>
        .form-group {
            margin-bottom: 15px;
            overflow: hidden;
        }
    </style>
</head>

<body>


    <div class="site-overlay"></div>

    <!-- wrapper start -->
    <div id="wrapper">
        <!-- Header start -->
        <div id="header">
            <div class="col-md-12 col-xs-12" style="display: block; float: left;"></div>
            <div class="logo">
                <h2>SuperBaby</h2>
            </div>

        </div>

        @*<h2>Index</h2>*@
        @using SuperBabyWeb.Models

        @model SuperBabyWeb.Models.ChangePassword

        @using (Html.BeginForm("index", "ChangePassword", new { initiallogin = "true" }, FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true)

            <div id="content  col-md-12 col-xs-12">
                <!--content start-->
                <div class="title-panel  col-md-12 col-xs-12">
                    <h1 class="title">@ViewBag.Title</h1>
                    <div class="link-buttons">
                        @if (ViewBag.IsEdit == "True")
                        {
                            <input type="submit" id="btnDelete" name="btnDelete" value="Delete Establishment" class="common" onclick=" return DeleteConfirm() " />             
                            <input type="submit" id="btnEditSave" name="btnEditSave" value="Save" class="common" />
                        }
                        else
                        {
                            <input type="submit" id="btnAddSave" name="btnAddSave" value="Save" class="common" />
                        }
                    </div>
                </div>

                <div class="content-block">

                    @* New Responsive Design Code By Ttv(Milan.G 20141218) (start)  *@
                    @if (ViewBag.SuccessMessage != null)
                    {
                        <div class="StatusMessage " style="color: blue; padding-left: 10px;">@ViewBag.SuccessMessage</div>
                    }
                    else
                    {
                        <div class="StatusMessage" style="color: blue; padding-left: 10px;">@TempData["SuccessMessage"]</div>
                    }


                    <div id="tbl" class="form-horizontal">
                        <input type="hidden" name="Redirect" value="@ViewBag.Redirect" />
                        <input type="hidden" id="UR" name="UR" value="" />
                        <input type="hidden" id="UserID" name="UserID" value="" />
                        <div class="row" style="padding: 10px;">
                            <div class="col-md-6 col-xs-12">
                                <div class="form-group" id="TREmail">
                                    @Html.Label("lblbEmail", "Email:", new { @class = "col-md-3 control-label" })
                                    <div class="col-md-9">
                                        @Html.TextBoxFor(m => m.Email, new { @class = "form-control", @value = ViewBag.Email })
                                        @Html.ValidationMessageFor(m => m.Email)
                                    </div>
                                </div>

                                <div class="form-group" id="TROldPassword">
                                    @Html.Label("lbloldPassword", "Old Password:", new { @class = "col-md-3 control-label" })
                                    <div class="col-md-9">
                                        @Html.PasswordFor(m => m.OldPassword, new { @class = "form-control", })
                                        @Html.ValidationMessageFor(m => m.OldPassword)
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.Label("lblNewPassword", "New Password:", new { @class = "col-md-3 control-label" })
                                    <div class="col-md-9">
                                        @Html.PasswordFor(m => m.NewPassword, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(m => m.NewPassword)
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.Label("lblConfirmPassword:", "Confirm Password:", new { @class = "col-md-3 control-label" })
                                    <div class="col-md-9">
                                        @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(m => m.ConfirmPassword)
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    @* New Responsive Design Code By Ttv(Milan.G 20141218) (End)  *@
                </div>

            </div>
        }
    </div>
    <!-- wrapper end -->

    <script src="@Url.Content("~/Scripts/pushy.js")"></script>
    <script src="~/Scripts/bootstrap.js"></script>
</body>
</html>
<script type="text/javascript">
    $(document).ready(function () {
        $("#UserID").val(GetParameterValues("Uid"));
        var MSG = '@ViewBag.SuccessMessage';
        if (MSG != '') {
            $("#tbl").hide();
            $("input[type='submit']").hide();
        }
        $("#Email").val('@ViewBag.Email');
        if (GetParameterValues("Redirect") == "mobapp") {
            var OldPw = GetParameterValues("UR");
            $("#OldPassword").val(OldPw);
            $("#UR").val(OldPw);
            $("#UserID").val(GetParameterValues("Uid"));
            $("#TREmail").hide();
            $("#TROldPassword").hide();
            $("#btnCancel").hide();
        }
    });
    function GetParameterValues(param) {
        var url = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for (var i = 0; i < url.length; i++) {
            var urlparam = url[i].split('=');
            if (urlparam[0] == param) {
                return urlparam[1];
            }
        }
    }
</script>


